{"status": "resolved", "priority": "urgent", "title": "Google Code bug importer API changes break our importer", "milestone": "0.13.09", "superceder": "", "nosylist": ["ehashman, paulproteus, shaunduncan, sunu"], "assigned": "paulproteus", "waitingon": "", "keywords": [], "id": "871", "files": [], "history": [{"message": "Also merged the counterpart <a href=\"https://github.com/openhatch/oh-mainline/pull/246\">https://github.com/openhatch/oh-mainline/pull/246</a> in\nmainline. Unless this breaks, marking as closed.\n   \n", "author": "ehashman"}, {"message": "Finished epically long pair-code review, merged code. There are still some\noutlying problems but this is essentially resolved.\n\nAsheesh will review the oh-mainline commits, do a deploy, and that will close\nthis issue.\n   \n", "author": "ehashman"}, {"message": "Opened new PR <a href=\"https://github.com/openhatch/oh-bugimporters/pull/55\">https://github.com/openhatch/oh-bugimporters/pull/55</a> in order to\nget this merged ASAP with code review feedback\n   \n", "author": "ehashman"}, {"message": "I've submitted PRs for oh-mainline (<a href=\"https://github.com/openhatch/oh-\">https://github.com/openhatch/oh-</a>\nmainline/pull/246) and oh-bugimporters (<a href=\"https://github.com/openhatch/oh-\">https://github.com/openhatch/oh-</a>\nbugimporters/pull/50) to fix this.\n   \n", "author": "shaunduncan"}, {"message": "I've been looking around a bit, and I'm going to be reworking some of the \ninternals of the Google bugimporter so that it uses successive calls to pull CSV \ndata directly from the issue tracker. I think this makes the most sense as the \nCSV contents can be controlled to give us most of the data we need, with one \nexception: the issue description. That will need to be scraped from the issue \ndetail page.\n\nAlso, CSV will let us avoid dealing with potentially messy feed parsing for \nissue feeds that have little, if any, documentation.\n   \n", "author": "shaunduncan"}, {"message": "ehashman turned this over to me\n   \n", "author": "shaunduncan"}, {"message": "Scraper for the google bugs will be based off the model in trac.py. HTML is not\ntoo bad in terms of structure. \n\nJust need to get a chance to work on it. Hopefully should finish development in\nthe next couple weeks.\n   \n", "author": "ehashman"}, {"message": "Fix is not so easy. Appears that /feeds/p/service/issueupdates/basic is also\ndeprecated, e.g.\n<a href=\"http://code.google.com/feeds/p/jmonkeyengine/issueupdates/basic/53\">http://code.google.com/feeds/p/jmonkeyengine/issueupdates/basic/53</a> gives a 404.\n\nWe will have to scrape the data.\n   \n", "author": "ehashman"}, {"message": "Claiming this for a couple hours.\n   \n", "author": "ehashman"}, {"message": "Per <a href=\"https://code.google.com/p/support/wiki/IssueTrackerAPI\">https://code.google.com/p/support/wiki/IssueTrackerAPI</a> and \n<a href=\"http://googleblog.blogspot.com/2012/12/winter-cleaning.html\">http://googleblog.blogspot.com/2012/12/winter-cleaning.html</a> , the code.google.com \nAPIs that we rely on in oh-bugimporters to download bug data from Google Code now \ngive HTTP status 404 for all requests.\n\nWe need, therefore, to reimplement the functionality of the bug importers via \neither scraping or the undocumented \"issueupdates basic\" API. \n\nThe issueupdates API can be found by visiting a bug list like \n<a href=\"https://code.google.com/p/jmonkeyengine/issues/list?can=2&amp;q=label%3AProduct-jME3\">https://code.google.com/p/jmonkeyengine/issues/list?can=2&amp;q=label%3AProduct-jME3</a> \nand then viewing HTML source, and finding this tag:\n\n &lt;link type=\"application/atom+xml\" rel=\"alternate\" \nhref=\"/feeds/p/jmonkeyengine/issueupdates/basic\"&gt;\n\nI believe (but have not verified at all) that everything we do with the old \nGoogle Code Issues API works the same with issueupdates/basic; it's just that \nwe'd have to adjust all the URLs that we request data from.\n\nLuckily, this is something that anyone can do! <a href=\"http://oh-\">http://oh-</a>\nbugimporters.readthedocs.org/ has reasonably good documentation, and you could \nfollow the example of the current google code import code. Your best bet for \nunderstanding how to make this change is to start by reading the existing code \nwithin <a href=\"https://github.com/openhatch/oh-bugimporters\">https://github.com/openhatch/oh-bugimporters</a> that makes the Google Code \nimporter work.\n\nIf you choose to do this, make sure to claim this bug by marking it as \"Assigned \nTo\" yourself.\n   \n", "author": "paulproteus"}]}